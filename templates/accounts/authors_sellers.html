{% extends 'base.html' %}

{% block content %}
  <div class="row">
    <div class="col-12 d-flex justify-content-between align-items-center mb-3">
      <h2>Authors &amp; Sellers</h2>
      <form method="get" class="d-flex" role="search">
        <input type="text" name="q" value="{{ q }}" class="form-control me-2" placeholder="Search users..." />
        <button class="btn btn-outline-secondary" type="submit">Search</button>
      </form>
    </div>
  </div>

  {% if users %}
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
      {% for u in users %}
      <div class="col">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title mb-1">{{ u.username }}</h5>
            {% if u.first_name or u.last_name %}
              <div class="text-muted">{{ u.first_name }} {{ u.last_name }}</div>
            {% endif %}
            {% if u.email %}
              <div class="small">{{ u.email }}</div>
            {% endif %}
            <div class="mt-2">
              {% if u.age %}<span class="badge bg-info me-1">Age {{ u.age }}</span>{% endif %}
              {% if u.birth_year %}<span class="badge bg-secondary me-1">Born {{ u.birth_year }}</span>{% endif %}
            </div>
            {% if u.address %}
              <p class="mt-2 mb-0">{{ u.address }}</p>
            {% endif %}
          </div>
          <div class="card-footer">
            <span class="small text-muted">Joined {{ u.date_joined|date:"Y-m-d" }}</span>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-light border">No public users found.</div>
  {% endif %}
{% endblock %}